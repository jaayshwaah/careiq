/* === New Improvements (REPLACE everything below this line) === */

/* Suggestion tiles */
.suggestion-tile {
  @apply rounded-xl border border-black/10 bg-white/70 px-3 py-2 text-sm text-ink
         hover:bg-white/90 active:scale-[0.99]
         dark:border-white/15 dark:bg-white/5 dark:hover:bg-white/10 transition;
}

/* Liquid Glass Composer — consolidated, higher specificity */
.composer { position: relative; }

/* Strong, frosted shell */
.composer .composer-inner {
  position: relative;
  display: flex;
  align-items: flex-end;
  gap: 0.5rem;
  border-radius: 1.25rem;
  padding: 0.5rem 0.5rem 0.5rem 0.75rem;

  /* Liquid glass */
  background: rgba(255, 255, 255, 0.48);
  backdrop-filter: blur(24px) saturate(185%);
  -webkit-backdrop-filter: blur(24px) saturate(185%);

  /* Crisp outline + depth */
  border: 1px solid rgba(255, 255, 255, 0.9);
  box-shadow:
    inset 0 0 1px rgba(255,255,255,0.9),
    0 10px 30px rgba(0,0,0,0.10),
    0 2px 8px rgba(0,0,0,0.06);
}

/* Refraction rim */
.composer .composer-inner::before {
  content: "";
  position: absolute; inset: 0; border-radius: inherit; pointer-events: none;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.35)) border-box;
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  padding: 1px; /* stroke thickness */
}

/* Fine surface noise */
.composer .composer-inner::after {
  content: ""; position: absolute; inset: 0; border-radius: inherit; pointer-events: none;
  opacity: .18;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Cfilter id='n'%3E%3CfeTurbulence baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
  background-size: 200px 200px;
}

/* Focus brightness + ring */
.composer:focus-within .composer-inner {
  background: rgba(255, 255, 255, 0.62);
  border-color: rgba(255, 255, 255, 1);
  box-shadow:
    inset 0 0 1px rgba(255,255,255,1),
    0 12px 34px rgba(0,0,0,0.14),
    0 0 0 3px rgba(64,132,255,0.20);
}

/* Dark mode variant */
.dark .composer .composer-inner {
  background: rgba(20,20,20,0.46);
  border-color: rgba(255,255,255,0.28);
  box-shadow:
    inset 0 0 1px rgba(255,255,255,0.12),
    0 14px 40px rgba(0,0,0,0.75),
    0 2px 10px rgba(0,0,0,0.45);
}
.dark .composer:focus-within .composer-inner {
  background: rgba(20,20,20,0.62);
  border-color: rgba(255,255,255,0.4);
  box-shadow:
    inset 0 0 1px rgba(255,255,255,0.14),
    0 16px 44px rgba(0,0,0,0.85),
    0 0 0 3px rgba(64,132,255,0.25);
}

/* iMessage‑like textarea (inside glass) */
.composer-input {
  width: 100%; min-height: 56px; max-height: 40vh; resize: vertical;
  border: 0 !important; background: transparent !important; outline: none !important; box-shadow: none !important;
  padding: 0.625rem 0.75rem; font-size: 0.95rem; line-height: 1.45;
}
.composer-input::placeholder { opacity: .55; }

/* Tactile Send button (overrides shadcn defaults) */
.btn-send {
  height: 40px !important; width: 40px !important; border-radius: 999px !important;
  display: inline-flex; align-items: center; justify-content: center;

  /* Glassy capsule */
  background: radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,0.95), rgba(255,255,255,0.55)) padding-box,
              linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.6)) border-box !important;
  border: 1px solid rgba(0,0,0,0.06) !important;
  backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
  color: #111 !important;

  box-shadow:
    0 2px 0 rgba(0,0,0,0.03),
    0 10px 26px rgba(0,0,0,0.16);
  transition: transform .14s ease, box-shadow .14s ease;
}
.btn-send:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 3px 0 rgba(0,0,0,0.04), 0 14px 30px rgba(0,0,0,0.2); }
.btn-send:disabled { opacity: .5; cursor: not-allowed; }

.btn-send svg { width: 18px; height: 18px; }

/* Accent (enabled state): subtle blue tint when input has text */
.composer:has(.composer-input:not(:placeholder-shown)) .btn-send,
.composer:has(.composer-input:focus) .btn-send {
  background:
    radial-gradient(140% 140% at 30% 15%, rgba(113,173,255,0.95), rgba(113,173,255,0.55)) padding-box,
    linear-gradient(180deg, rgba(113,173,255,0.95), rgba(113,173,255,0.6)) border-box !important;
  color: #0b1a2e !important;
}
.dark .composer:has(.composer-input:not(:placeholder-shown)) .btn-send,
.dark .composer:has(.composer-input:focus) .btn-send {
  background:
    radial-gradient(140% 140% at 30% 15%, rgba(113,173,255,0.22), rgba(113,173,255,0.10)) padding-box,
    linear-gradient(180deg, rgba(113,173,255,0.18), rgba(113,173,255,0.10)) border-box !important;
  color: #dce9ff !important;
}
