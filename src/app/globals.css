@tailwind base;
@tailwind components;
@tailwind utilities;

:root { --radius: 0.75rem; }
* { min-width: 0; }
html, body { height: 100%; }

body {
  @apply bg-canvas text-ink antialiased;
  font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "SF Pro Text",
    "SF Pro Display", "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji",
    "Segoe UI Emoji";
}

/* Background wash */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background:
    radial-gradient(1200px 700px at -10% -10%, hsl(212 100% 97%) 0%, transparent 45%),
    radial-gradient(1000px 600px at 110% -10%, hsl(260 100% 98%) 0%, transparent 40%),
    radial-gradient(900px 600px at 50% 120%, hsl(180 100% 97%) 0%, transparent 40%);
  pointer-events: none;
  z-index: -2;
}
.dark body { @apply bg-canvas-dark text-ink-dark; }
.dark body::before {
  background:
    radial-gradient(1000px 600px at -10% -10%, hsl(222 35% 18% / .8) 0%, transparent 50%),
    radial-gradient(900px 600px at 110% -10%, hsl(270 35% 18% / .7) 0%, transparent 45%),
    radial-gradient(900px 600px at 50% 120%, hsl(200 35% 18% / .7) 0%, transparent 45%);
}

/* Glass */
.glass { @apply bg-glass backdrop-blur-md border border-border shadow-soft rounded-2xl; }
.dark .glass { @apply bg-white/5 backdrop-blur-md border-border-dark shadow-softdark; }

/* Scrollbars */
* { scrollbar-width: thin; scrollbar-color: hsl(220 10% 70%) transparent; }
*::-webkit-scrollbar { height: 8px; width: 8px; }
*::-webkit-scrollbar-thumb { background: hsl(220 10% 70%); border-radius: 999px; }
*::-webkit-scrollbar-track { background: transparent; }

/* Messages */
.message { @apply rounded-2xl px-4 py-3 leading-relaxed shadow; }
.message.assistant { @apply bg-white/70 dark:bg-white/10 border border-border dark:border-border-dark; }
.message.user { @apply bg-accent-soft border border-accent/30; }

kbd { @apply inline-flex items-center justify-center px-1.5 py-0.5 rounded-md text-xs font-medium border border-border bg-white/70 dark:bg-white/10 dark:border-border-dark; }

/* === New Improvements === */

/* Composer: clearer outline / shade */
.composer {
  @apply rounded-2xl border border-black/10 bg-white/80 shadow-soft backdrop-blur-md
         dark:border-white/15 dark:bg-white/5 dark:shadow-softdark;
}

/* Suggestion tiles */
.suggestion-tile {
  @apply rounded-xl border border-black/10 bg-white/70 px-3 py-2 text-sm text-ink
         hover:bg-white/90 active:scale-[0.99]
         dark:border-white/15 dark:bg-white/5 dark:hover:bg-white/10 transition;
}
/* Liquid Glass Composer (macOS/iOS style) */
.composer {
  position: relative;
  border-radius: 1.5rem;
  padding: 0.75rem 1rem;

  /* Glass effect */
  background: rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);

  /* Subtle border with light refraction */
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-shadow:
    inset 0 0 0.5px rgba(255, 255, 255, 0.6),
    0 4px 20px rgba(0, 0, 0, 0.05);

  /* Smooth transitions for hover/focus */
  transition: all 0.25s ease;
}

.composer:focus-within {
  background: rgba(255, 255, 255, 0.55);
  border-color: rgba(255, 255, 255, 0.8);
  box-shadow:
    inset 0 0 0.75px rgba(255, 255, 255, 0.8),
    0 6px 25px rgba(0, 0, 0, 0.08);
}

/* Dark mode variant */
.dark .composer {
  background: rgba(25, 25, 25, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow:
    inset 0 0 0.5px rgba(255, 255, 255, 0.08),
    0 4px 20px rgba(0, 0, 0, 0.3);
}

.dark .composer:focus-within {
  background: rgba(25, 25, 25, 0.55);
  border-color: rgba(255, 255, 255, 0.2);
  box-shadow:
    inset 0 0 0.75px rgba(255, 255, 255, 0.12),
    0 6px 25px rgba(0, 0, 0, 0.4);
}
